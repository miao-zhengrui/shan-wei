<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title></title>
	<style>
		#box{
			width: 100px;
			height: 100px;
			background: green;
			position: absolute;
			left: 300px;
			top: 300px;
		}
	</style>
</head>

<body>
	<!-- 
		陈学辉
	 -->
	<div id="box"></div>

	<script>
		/*
			两个功能都是要放在鼠标移动的时候去完成，鼠标移动的时候需要做两件事
				1、改变鼠标的样式
				2、改变盒子的样式

			要区分这两件事需要知道鼠标有没有按下
				1、鼠标没有按下，改变鼠标的样式
				2、鼠标按下了，改变盒子的样式

		 */
		
		var box=document.querySelector('#box');
		var dir='';	//用来记录鼠标的样式
		var isDown=false;	//用来记录鼠标有没有按下，true按下了，false没有按下
		var mes={};	//用来记录盒子的信息

		//这个记录的信息主要用于实现第二个功能
		box.onmousedown=function(ev){
			isDown=true;

			mes={
				x:ev.clientX,
				y:ev.clientY,
				w:getPos(this).width,
				h:getPos(this).height,
				l:getPos(this).left,
				t:getPos(this).top,
				r:getPos(this).right,
				b:getPos(this).bottom,
			};
		};

		document.onmousemove=function(ev){
			if(!isDown){
				//这个条件成立说明鼠标没有按下，要改变鼠标的样式
				/*
					e-resize	此光标指示矩形框的边缘可被向右（东）移动。
					ne-resize	此光标指示矩形框的边缘可被向上及向右移动（北/东）。
					nw-resize	此光标指示矩形框的边缘可被向上及向左移动（北/西）。
					n-resize	此光标指示矩形框的边缘可被向上（北）移动。
					se-resize	此光标指示矩形框的边缘可被向下及向右移动（南/东）。
					sw-resize	此光标指示矩形框的边缘可被向下及向左移动（南/西）。
					s-resize	此光标指示矩形框的边缘可被向下移动（南）。
					w-resize	此光标指示矩形框的边缘可被向左移动（西）。 
				 */

				box.style.cursor='auto';
				dir='';

				//上
				if(ev.clientY<getPos(box).top+10){
					dir+='n';
				}

				//下
				if(ev.clientY>getPos(box).bottom-10){
					dir+='s';
				}

				//左
				if(ev.clientX<getPos(box).left+10){
					dir+='w';
				}

				//右
				if(ev.clientX>getPos(box).right-10){
					dir+='e';
				}
				
				//console.log(dir);

				box.style.cursor=dir+'-resize';

			}else{
				//改变盒子的样式
				if(dir.indexOf('e')!=-1){
					//这个条件成立说明现在是往右拖
					//w=原来的宽（mes.w）+拖动的距离（ev.clientX-mes.x）
					var w=mes.w+ev.clientX-mes.x;

					// console.log(w);
					if(w<100){
						w=100;
					}
					
					box.style.width=w+'px';
				}

				//往下拖
				if(dir.indexOf('s')!=-1){
					var h=mes.h+ev.clientY-mes.y;

					// console.log(w);
					if(h<100){
						h=100;
					}
					
					box.style.height=h+'px';
				}

				//往左拖
				if(dir.indexOf('w')!=-1){
					//w=原来的宽（mes.w）+拖动的距离（mes.x-ev.clientX）
					//l=原来的距离(mes.l)-拖动的距离（mes.x-ev.clientX）
					var w=mes.w+mes.x-ev.clientX;
					var l=mes.l-(mes.x-ev.clientX);

					// console.log(w);
					if(w<100){
						w=100;
						l=mes.r-100;
					}
					
					box.style.width=w+'px';
					box.style.left=l+'px';
				}
				
				//往上拖
				if(dir.indexOf('n')!=-1){
					//w=原来的宽（mes.w）+拖动的距离（mes.x-ev.clientX）
					//l=原来的距离(mes.l)-拖动的距离（mes.x-ev.clientX）
					var h=mes.h+mes.y-ev.clientY;
					var t=mes.t-(mes.y-ev.clientY);

					// console.log(w);
					if(h<100){
						h=100;
						t=mes.b-100;
					}
					
					box.style.height=h+'px';
					box.style.top=t+'px';
				}
			}
		};

		document.onmouseup=function(){
			isDown=false;
		};

		function getPos(obj){
			return  obj.getBoundingClientRect();
			/*
				{
					width:100,
					height:100,
					left:200,
					top:200,
					right:200,
					bottom:200
				} 
			 */
		}
	</script>
</body>

</html>